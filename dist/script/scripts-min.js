var placeholder;function getParameterByName(e,s){s||(s=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(s);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function getMessages_friends(){var e=[];$(".chat_friend .messages .message.checked").each(function(){e.push($(this).data("id"))}),$.get("api/getmessages.php?friend="+getParameterByName("friend"),function(s){var t=s.split(";");t.pop();var a=""==$(".chat_friend .messages").html();for(message in $(".chat_friend .messages").html(""),t){var n;switch(good_message=t[message].split(","),good_message[5]){case"text":n=(n=decodeURIComponent(good_message[1]).replace(/_coma_/g,",")).replace(/_semicoma_/g,";");break;case"image":n='<img class="image" src="data/messages_files/'+good_message[1]+'">';break;case"video":n="<video class='video' src='data/messages_files/"+good_message[1]+'\' poster="data/images/video-poster.jpg"></video>'}me="me"==good_message[0]?"me":"notme";var i=good_message[2].replace("~~",":"),o=good_message[4].replace("~~",":"),r=good_message[3];$(".chat_friend .messages").html($(".chat_friend .messages").html()+'\n                        <div class="message '+me+" "+(e.includes(parseInt(r))?"checked":"")+'" data-id="'+r+'">\n                            <div class="message-content">'+n+'<span class="time '+("now"==i?"active":"")+'">'+i+'</span>\n                            </div>\n                            <div class="tools">\n                                <span class="seen-time">'+o+'</span>\n                                <button class="delete-message">\n                                    <i class="fas fa-prescription-bottle"></i>\n                                </button>\n                            </div>\n                        </div>\n                    ')}$(".messages .message.notme").each(function(){0==$(this).next(".message.notme").length&0==$(this).prev(".message.notme").length&&$(this).addClass("lone-notme"),0!=$(this).next(".message.notme").length&0!=$(this).prev(".message.notme").length&&$(this).addClass("middle-notme"),0==$(this).next(".message.notme").length&&($(this).hasClass("lone-notme")||$(this).addClass("last-notme")),0==$(this).prev(".message.notme").length&&($(this).hasClass("lone-notme")||$(this).addClass("first-notme"))}),$(".messages .message.me").each(function(){0==$(this).next(".message.me").length&0==$(this).prev(".message.me").length&&$(this).addClass("lone-me"),0!=$(this).next(".message.me").length&0!=$(this).prev(".message.me").length&&$(this).addClass("middle-me"),0==$(this).next(".message.me").length&&($(this).hasClass("lone-me")||$(this).addClass("last-me")),0==$(this).prev(".message.me").length&&($(this).hasClass("lone-me")||$(this).addClass("first-me"))}),$(".message.last-notme .message-content").css("--image","url(../data/users_img/"+$(".his-image").html()+")"),$(".message.lone-notme .message-content").css("--image","url(../data/users_img/"+$(".his-image").html()+")"),$(".message.last-me .message-content").css("--image","url(../data/users_img/"+$(".my-image").html()+")"),$(".message.lone-me .message-content").css("--image","url(../data/users_img/"+$(".my-image").html()+")"),$(".messages .message .audio, .messages .message .video, .messages .message .image").parent(".message-content").css("width","80%"),setTimeout(function(){$("html").getNiceScroll().resize(),a&&$(".messages").scrollTop($(".messages").prop("scrollHeight"))},400)})}function animations(){var e=$(window).scrollTop();e>=$(".what").offset().top-500&&($(".what .my-title").css("opacity","1").addClass("animated fadeInLeft"),setTimeout(function(){$(".what .content").css("opacity","1").addClass("animated swing")},1e3)),e>=$(".about").offset().top-500&&setTimeout(function(){$(".about .my-title").css("opacity","1").addClass("animated fadeInLeft"),setTimeout(function(){$(".about .content").css("opacity","1").addClass("animated swing")},1e3)},1e3),e>=$(".features").offset().top-500&&setTimeout(function(){$(".features .my-title").css("opacity","1").addClass("animated fadeInLeft");for(var e=0,s=0;s<$(".features .content").find(".feature").length;s++)setTimeout(function(){var s=$(".features .content").find(".feature")[e];$(s).css("opacity","1").addClass("animated rotateIn"),e++},1e3*s+1e3)},1e3),e>=$(".comments").offset().top-500&&setTimeout(function(){$(".comments .my-title").css("opacity","1").addClass("animated fadeInLeft"),setTimeout(function(){$(".comments .content").css("opacity","1").addClass("animated shake")},1e3)},1500),e>=$(".mycomment").offset().top-700&&setTimeout(function(){$(".mycomment .my-title").css("opacity","1").addClass("animated fadeInLeft"),setTimeout(function(){$(".mycomment .content").css("opacity","1").addClass("animated bounce")},1e3)},1e3),e>=$(".footer").offset().top-1e3&&setTimeout(function(){$(".footer .rights").css("opacity","1").addClass("animated rubberBand"),$(".footer .data .left").css("opacity","1").addClass("animated bounceInLeft delay-1s"),$(".footer .data .right").css("opacity","1").addClass("animated bounceInLeft delay-2s")},1e3)}function lastlogin(){$.post("api/makeonline.php"),$.each($(".friends .friend, .my-friend"),function(e,s){$.post("api/lastlogin.php",{user_id:$(s).data("id")},function(e){"online"==e&&$(s).find(".date").addClass("online"),$(s).find(".date").text(e)})})}function getMessages_groups(){$.get("api/getmessagesgroup.php?group="+getParameterByName("group"),function(e){var s=[],t=""==$(".chat_friend .messages").html();$(".chat_group .messages .message.checked").each(function(){s.push($(this).data("id"))});var a=e.split(";");for(message in a.pop(),$(".chat_group .messages").html(""),a){var n;switch(good_message=a[message].split(","),good_message[4]){case"text":n=(n=decodeURIComponent(good_message[1]).replace(/_coma_/g,",")).replace(/_semicoma_/g,";");break;case"image":n='<img class="image" src="data/messages_files/'+good_message[1]+'">';break;case"video":n="<video class='video' src='data/messages_files/"+good_message[1]+'\' poster="data/images/video-poster.jpg"></video>'}me="me"==good_message[0]?"":"notme";var i=good_message[3].replace("~~",":");$(".chat_group .messages").html($(".chat_group .messages").html()+'\n                                                    <div class="message '+me+" "+(s.includes(parseInt(good_message[2]))?"checked":"")+" "+good_message[0].replace(" ","_")+'" data-id="'+good_message[2]+'">\n                                                        <div class="message-content">'+n+'<span class="time '+("now"==i?"active":"")+'">'+i+'</span>\n                                                        </div>\n                                                        <div class="tools">\n                                                            <button class="show-seens-btn">\n                                                                <i class="fas fa-eye"></i>\n                                                            </button>\n                                                            <button class="delete-message">\n                                                                <i class="fas fa-prescription-bottle"></i>\n                                                            </button>\n                                                        </div>\n                                                    </div>\n                                                ')}$(".messages .message.notme").each(function(){var e=$(this).data("id");0==$(this).next(".message.notme[data-id="+e+"]").length&0==$(this).prev(".message.notme[data-id="+e+"]").length&&$(this).addClass("lone-notme"),0!=$(this).next(".message.notme[data-id="+e+"]").length&0!=$(this).prev(".message.notme[data-id="+e+"]").length&&$(this).addClass("middle-notme"),0==$(this).next(".message.notme[data-id="+e+"]").length&&($(this).hasClass("lone-notme")||$(this).addClass("last-notme")),0==$(this).prev(".message.notme[data-id="+e+"]").length&&($(this).hasClass("lone-notme")||$(this).addClass("first-notme"))}),$(".messages .message.me").each(function(){0==$(this).next(".message.me").length&0==$(this).prev(".message.me").length&&$(this).addClass("lone-me"),0!=$(this).next(".message.me").length&0!=$(this).prev(".message.me").length&&$(this).addClass("middle-me"),0==$(this).next(".message.me").length&&($(this).hasClass("lone-me")||$(this).addClass("last-me")),0==$(this).prev(".message.me").length&&($(this).hasClass("lone-me")||$(this).addClass("first-me"))}),$(".message.last-me .message-content").css("--image","url(../data/users_img/"+$(".my-image").html()+")"),$(".message.lone-me .message-content").css("--image","url(../data/users_img/"+$(".my-image").html()+")");var o=[];for(user in $(".users_image div").each(function(){o.includes($(this).attr("class").split(" ")[0])||o.push($(this).attr("class").split(" ")[0])}),o)$(".message.last-notme."+o[user]+" .message-content").css("--image","url(../data/users_img/"+$(".users_image ."+o[user]).html()+")"),$(".message.lone-notme."+o[user]+" .message-content").css("--image","url(../data/users_img/"+$(".users_image ."+o[user]).html()+")"),$(".message.first-notme."+o[user]+" .message-content").prepend("<span class='text-secondary font-weight-bold d-block'>"+o[user].replace("_"," ")+"</span>"),$(".message.lone-notme."+o[user]+" .message-content").prepend("<span class='text-secondary font-weight-bold d-block'>"+o[user].replace("_"," ")+"</span>");setTimeout(function(){$("html").getNiceScroll().resize(),t&&$(".messages").scrollTop($(".messages").prop("scrollHeight"))},600)})}function window_wrap(){$(".new_window").wrap('<div class="new_window_wrapper"></div>')}function make_notification(){$.get("api/newnotifies.php",function(e){$(".notification .notify-btn").addClass(e)}),$.post("api/getnotifications.php",function(e){if(""!=e){var s=e.split(";");for(notification in s.pop(),$(".notifies").html(""),s){var t=s[notification].split(":");t[4]=t[4].replace("~~",":");var a="";switch(t[3]){case"friend_request":a='<i class="fas fa-user-friends"></i>';break;case"friend_request_accepted":a='<i class="fas fa-user-check"></i>';break;case"message":a='<i class="fas fa-envelope"></i>'}$(".notifies").html($(".notifies").html()+'\n                    <a class="dropdown-item notify" href="'+t[2]+'">\n                        <span class="sr-only id">'+t[0]+"</span>"+a+'<span class="content">'+t[1]+'</span>\n                        <span class="date">'+t[4]+"</span>\n                    </a>\n\n                ")}}})}$(".friends").on("click",".friend",function(){location.assign("chat.php?friend="+$(this).data("id"))}),$(".friends").on("click",".friend .settings",function(e){e.stopPropagation();var s=$(this).parents(".friend"),t=$(".friends .friend-settings");t.find(".remove-link").attr("href","api/removefriend.php?friend="+s.attr("data-id")),t.find(".block-link").addClass("block-true"==s.find(".block-val").val()?"btn-success":"btn-danger").removeClass("block-true"==s.find(".block-val").val()?"btn-danger":"btn-success").text("block-true"==s.find(".block-val").val()?"Unblock him/her":"Block him/her").attr("href","api/toggleblock.php?id="+s.attr("data-id")),t.parent(".new_window_wrapper").fadeIn(700),t.getNiceScroll().resize()}),$(".friends").on("click",".friend-settings .close",function(){$(".friends .friend-settings").parent(".new_window_wrapper").fadeOut(700)}),$(".myfriends").on("click",".friend",function(){location.assign("chat.php?friend="+$(this).data("id"))}),$(".chat_friend .send-btn").click(function(e){e.preventDefault(),$.post("api/insertmessagefriend.php",{friend_id:getParameterByName("friend"),message:encodeURIComponent($(".message-field").val())},function(e){getMessages_friends(),$(".message-field").val(""),setTimeout(function(){$(".messages").scrollTop($(".messages").prop("scrollHeight"))},400)})}),$(".chat_friend .send-file-btn .file, .chat_group .send-file-btn .file").change(function(){$(this).parents("form").submit()}),$(".communicate .search .button").click(function(){$(this).parents(".search").find(".content").slideToggle(1e3,function(){$("html").getNiceScroll().resize()}),$(this).find("svg").toggleClass("fa-arrow-down fa-arrow-up")}),$(".communicate .form-search").submit(function(e){var s=$(this).parents(".search");if(s.siblings(".friends").length>0){e.preventDefault();var t=""==s.find("#id").val()?"nono":s.find("#id").val(),a=""==s.find("#name").val()?"nono":s.find("#name").val(),n=null==s.find("[name=friendtype]:checked").data("value")?"nono":s.find("[name=friendtype]:checked").data("value");$.post("api/getusers.php",{id:t,name:a,type:"myfriends","more-type":n},function(e){if(""!=e){var s=e.split(";");for(friend in s.pop(),$(".nofriends").remove(),$(".friends .friends-content").css("display","block").html(""),s){var t=s[friend].split(",");$(".friends .friends-content").html($(".friends .friends-content").html()+'\n                                <div class="friend row" data-id="'+t[0]+'">\n                                    <input type="hidden" class="block-val" value="block-'+t[7]+'">\n                                    <div class="left col-md-8">\n                                        <img class="user-image" src="data/users_img/'+t[3]+'" alt="Logo">\n                                        <h4 class="name">'+t[1]+"</h4>'\n                                        "+(0==t[5]?"":'<span class="badge badge-danger new-messages">'+t[5]+"</span>")+'<span class="date">1 hour ago</span>\n                                    </div>\n                                    <div class="right col-md-4 mb-2 mb-md-0">\n                                        <a href="api/togglefav.php?id='+t[0]+"&fav="+t[4]+'">\n                                            <i class="fas fa-heart favourite '+("true"==t[4]?"active":"")+'"></i>\n                                        </a>\n                                        <button class="settings"><i class="fa fa-cog"></i></button>\n                                        <a href="userprofile.php?id='+t[0]+'"><i class="fas fa-info-circle info"></i></a>\n                                    </div>\n                                </div>\n                            ')}lastlogin(),$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".communicate .search .button").click()}else $(".nofriends").remove(),$(".friends .friends-content").css("display","none").after('<div class="alert alert-danger text-center font-weight-bold nofriends">There\'s not any user</div>'),$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".communicate .search .button").click()})}else if($(this).parents(".search").siblings(".groups").length>0){e.preventDefault();t=""==s.find("#id").val()?"nono":s.find("#id").val(),a=""==s.find("#name").val()?"nono":s.find("#name").val(),n=null==s.find("[name=grouptype]:checked").data("value")?"nono":s.find("[name=grouptype]:checked").data("value");$.post("api/getgroups.php",{id:t,name:a,type:"mygroups","more-type":n},function(e){if(""!=e){var s=e.split(";");for(group in s.pop(),$(".nogroups").remove(),$(window).width()>768?$(".groups").css("display","block").html(""):$(".groups").css("display","table").html(""),s){var t=s[group].split(",");$(".groups").html($(".groups").html()+' <div class="group row" data-id="'+t[0]+'">\n                                    <div class="left col-md-8">\n                                        <img class="group-logo" src="data/groups_logo/'+t[2]+'" alt="Logo">\n                                        <h4 class="name">'+t[1]+"</h4>"+(0==t[4]?"":'<span class="badge badge-danger new-messages ml-2">'+t[4]+"</span>")+'\n                                    </div>\n                                    <div class="right col-md-4 mb-2 mb-md-0"> \n                                        <a href="api/togglepin.php?id='+t[0]+"&pin="+t[3]+'">\n                                            <i class="fas fa-thumbtack pin '+("true"==t[3]?"active":"")+'"></i>\n                                        </a>\n                                        <a href="group.php?group='+t[0]+'&t=details"><i class="fas fa-info-circle info"></i></a>\n\n                                    </div>\n                                </div> \n                        ')}$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".communicate .search .button").click()}else $(".nogroups").remove(),$(".groups").css("display","none").after('<div class="alert alert-danger text-center font-weight-bold nogroups">There\'s not any group</div>'),$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".communicate .search .button").click()})}}),$(function(){var e;$(".chat_friend").hasClass("chat_friend")&&(getMessages_friends(),setTimeout(function(){$(".chat_friend .messages").scrollTop($(".chat_friend .messages")[0].scrollHeight)},50),setInterval(function(){getMessages_friends()},5e3)),$(".message-field").keydown(function(e){9==e.which&&$(".send-btn").click()}),$(".groups .group").on("click",function(){location.assign("group.php?group="+$(this).data("id"))}),$(".chat_group").hasClass("chat_group")&&(getMessages_groups(),setTimeout(function(){$(".chat_group .messages").scrollTop($(".chat_group .messages")[0].scrollHeight)},50),setInterval(function(){getMessages_groups()},5e3)),$(".chat_group .send-btn").click(function(e){e.preventDefault(),$.post("api/insertmessagegroup.php",{group_id:getParameterByName("group"),message:encodeURIComponent($(".message-field").val())},function(e){getMessages_groups(),$(".message-field").val("")})}),$(".chat_group .group-setting-btn").click(function(){$(".chat_group .group-settings").parent(".new_window_wrapper").fadeIn(700),$(".chat_group .group-settings").getNiceScroll().resize()}),$(".chat_group .group-settings .close").click(function(){$(".chat_group .group-settings").parent(".new_window_wrapper").fadeOut(700)}),$(".change-logo input").change(function(){$(this).parent().siblings("img.group_logo").attr("src",URL.createObjectURL(event.target.files[0]))}),$(".chat_group .group-settings form").submit(function(e){$(".chat_group .group-settings form [name=description]").val(""==$(".chat_group .group-settings form [name=description]").val()?"null":$(".groups .new-group-content .inputs #description").val());var s=$(".chat_group .group-settings form [name=join]:checked").data("value");$("#tojoin").val(s)}),$(".chat_friend .messages").on({mouseup:function(){clearTimeout(e)},mousedown:function(){var s=$(this);e=setTimeout(function(){s.toggleClass("checked")},600)}},".message"),$(".chat_friend .messages").on("click",".message .tools .delete-message",function(e){$.get("api/deletemessage.php?type=friend&id="+$(this).parents(".message").attr("data-id")),getMessages_friends()}),$("body").innerWidth()>1e3?$(".chat_group .messages").on({mouseup:function(){clearTimeout(e)},mousedown:function(){var s=$(this);e=setTimeout(function(){s.toggleClass("checked")},600)}},".message"):$(".chat_group .messages").on("click",".message",function(){$(this).toggleClass("checked")}),$(".chat_group .messages").on("click",".message .tools .delete-message",function(e){$.get("api/deletemessage.php?type=group&id="+$(this).parents(".message").attr("data-id")),getMessages_groups()}),$(".chat_group").on("click",".show-seens-btn",function(){$(".chat_group .messages_seens").parent(".new_window_wrapper").fadeIn(700),$(".chat_group .messages_seens").getNiceScroll().resize();var e=$(this).parents(".message").attr("data-id");$.get("api/seenmessagesgroups.php?id="+e,function(e){var s=e.split(";");for(user in s.pop(),$(".chat_group .messages_seens .content").html(""),s){var t=s[user].split(","),a=t[2].replace("~~",":");$(".chat_group .messages_seens .content").html($(".chat_group .messages_seens .content").html()+'\n                        <div class="member">\n                            <img src="data/users_img/'+t[1]+'" class="image" />\n                            <h4 class="name">'+t[0]+'</h4>\n                            <span class="seen '+("seen now"==a?"now":"")+("Unseen yet"==a?"unseen":"")+'">'+a+"</span>\n                        </div>\n                    ")}$(".messages_seens").getNiceScroll().resize()})}),$(".chat_group").on("click",".messages_seens .close",function(){$(".chat_group .messages_seens").parent(".new_window_wrapper").fadeOut(700)}),$(".emojis .emoji").click(function(){$(".message-field").val($(".message-field").val()+$(this).text())}),$(".messages").on("click"," .message .image",function(){$(".viewer").parent(".new_window_wrapper").fadeIn(700),$(".viewer .content").html('\n                <img class="image" src="'+$(this).attr("src")+'">\n            '),$(".viewer").getNiceScroll().resize()}),$(".messages").on("click"," .message .video",function(){$(".viewer").parent(".new_window_wrapper").fadeIn(700),$(".viewer .content").html('\n                <video class="video" src="'+$(this).attr("src")+'" poster="data/images/video-poster.jpg" controls autoplay></video>\n            '),$(".viewer").getNiceScroll().resize()}),$(".viewer .close").click(function(){$(".viewer .content").html(""),$(".viewer").parent(".new_window_wrapper").fadeOut(700)})}),$(function(){$(".communicate").parent("body").css({"background-image":"linear-gradient(#80DEEA, #64B5F6, #26C6DA)","background-size":"cover",height:"auto"})}),$("input").focus(function(){placeholder=$(this).attr("placeholder"),$(this).attr("placeholder","")}),$("input").blur(function(){$(this).attr("placeholder",placeholder)}),$("input:not([type=submit])[required]").each(function(){$(this).wrap("<div class='input-req'></div>"),$(this).each(function(e,s){var t=s.classList.value.split(" ").filter(e=>e.match(/col-\w*-?[0-9]/));t.length>0&&($(s).parent(".input-req").addClass(t),$(s).removeClass(t))})}),$("input[required]").each(function(){$(this).after('<span class="req">*</span>')}),$(function(){$("html").niceScroll({cursorcolor:"#50a",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".message-field").niceScroll({cursorcolor:"#05a",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".chat_group .groups").niceScroll({cursorcolor:"#05a",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".chat_friend .myfriends").niceScroll({cursorcolor:"#05a",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".emojis").niceScroll({cursorcolor:"#00f",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".messages").niceScroll({cursorcolor:"#00f",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".group-settings").niceScroll({cursorcolor:"#00f",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".messages_seens").niceScroll({cursorcolor:"#00f",cursoropacitymin:.5,cursorborder:"none",cursorwidth:"6px"}),$(".comments .content").slick({speed:300,slidesToShow:5,slidesToScroll:2,autoplay:!0,autoplaySpeed:2500,infinite:!0,centerMode:!0,centerPadding:"40px",responsive:[{breakpoint:1441,settings:{slidesToShow:4,slidesToScroll:1,infinite:!0}},{breakpoint:1025,settings:{slidesToShow:3,slidesToScroll:1,infinite:!0,centerMode:!1,centerPadding:"0px"}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,centerMode:!1,centerPadding:"0px"}},{breakpoint:678,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!1,centerPadding:"0px"}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!1,centerPadding:"0px"}}]}),$(window).on("scroll",function(){0!=$(".home-page-body").length&&animations()}),$(".stat-number").each(function(){var e=$(this).data("value").trim(),s=-1,t=3e3/e,a=$(this),n=setInterval(function(){s+=1,a.text(s),s==e&&clearInterval(n)},t)})}),$(function(){var e=$(".login-form, .signup-form ");e.parent("body").css({"background-image":"linear-gradient(#786fa6, #778beb)",height:e.innerHeight()+50}),e.slideDown(600,function(){$(e).animate({left:($("body").innerWidth()-e.width())/2},1400,function(){$("body").innerHeight()-(e.height()+150)>0&&e.animate({top:($("body").innerHeight()-(e.height()+150))/2},1300)})})}),window_wrap(),$(function(){$(".new-group-content .close").click(function(){$(".new_window_wrapper").fadeOut(700)}),$(".new-group-button").click(function(){$(".new_window_wrapper").fadeIn(700)}),$(".groups .members ").on("click",".member .delete",function(e){e.preventDefault(),$(this).parent(".member").detach();var s=$(this).parent(".member");$(".groups .myfriends").html($(".groups .myfriends").html()+'\n            <div class="myfriend" data-id="'+$(s).data("id")+'" data-name="'+$(s).data("name")+'" data-image="'+$(s).data("image")+'">\n                <img class="user-image" src="data/users_img/'+$(s).data("image")+'" alt="Logo">\n                <h4 class="name">'+$(s).data("name")+"</h4>\n            </div>\n        ")}),$(".groups .members .add-member").click(function(e){e.preventDefault(),$(".groups .myfriends").addClass("open")}),$(".groups .myfriends .close").click(function(){$(".groups .myfriends").removeClass("open")}),$(".groups .myfriends ").on("click",".myfriend",function(e){e.preventDefault();var s=$(this);$(".groups .members .added-members").html($(".groups .members .added-members").html()+'        \n            <span class="member" data-id="'+$(s).data("id")+'" data-name="'+$(s).data("name")+'" data-image="'+$(s).data("image")+'">\n                '+$(s).data("name")+'\n                <button class="delete"><i class="far fa-times-circle"></i></button>\n            </span>\n        '),$(s).detach()}),$(".groups .new-group-content form").submit(function(e){$(".groups .new-group-content .inputs #description").val(""==$(".groups .new-group-content .inputs #description").val()?"null":$(".groups .new-group-content .inputs #description").val());var s="";$(".groups .members .added-members .member").each(function(){s=s+$(this).data("id")+","}),$("#membersingroup").val(s);var t=$(".groups .new-group-content [name=join]:checked").data("value");$("#tojoin").val(t)}),$("#group_logo").change(function(){$(this).parent().siblings("img").attr("src",URL.createObjectURL(event.target.files[0]))}),$(".groups .form-search").submit(function(e){e.preventDefault();var s=""==$(".groups .id").val()?"nono":$(".groups .id").val(),t=""==$(".groups .search .name").val()?"nono":$(".groups .search .name").val(),a=null==$(".groups [name=grouptype]:checked").data("value")?"nono":$(".groups [name=grouptype]:checked").data("value");$.post("api/getgroups.php",{id:s,name:t,type:a},function(e){if(""!=e){var s=e.split(";");s.pop(),$(".nogroups").remove(),$(window).width()>768?$(".groups table").css("display","table").find("tbody").html(""):$(".groups table").css("display","block").find("tbody").html("");var t=0,a=[],n=[],i=[],o=[];for(group in s){var r=s[group].split(","),c="";"no-direct"==r[5]?c='<a class="btn mr-md-2 mb-1 mb-md-0 btn-success" href="api/joingroup.php?group='+r[0]+'">Join to group</a>':"no-request"==r[5]?c='<a class="btn mr-md-2 mb-1 mb-md-0 btn-info" href="api/joingroup.php?group='+r[0]+'">Send a request</a>':"request"==r[5]?c='<a class="btn mr-md-2 mb-1 mb-md-0 btn-warning" href="api/leavegroup.php?group='+r[0]+'">Cancel the request</a>':"member"==r[5]&&(c='<a class="btn mr-md-2 mb-1 mb-md-0 btn-danger" href="api/leavegroup.php?group='+r[0]+'">Leave group</a>'),o.push(c),a.push(r[0]),n.push(r[1]),i.push(r[2]),$.post("api/usersingroup.php",{group_id:r[0]},function(e){var s=e.split(";");s.pop();var r="";for(member in s)members_data=s[member].split(","),r=r+"<span class='member "+members_data[1]+" "+(members_data[0]==$("#my-name").text()?"me":"")+"' title='"+("n_member"==members_data[1]?"member":members_data[1])+"'>"+(members_data[0]==$("#my-name").text()?"me":members_data[0])+"</span>";$(".groups table tbody").html($(".groups table tbody").html()+"\n                                <tr> \n                                    <td>"+a[t]+'</td>\n                                    <td><img class="group-logo" src="data/groups_logo/'+i[t]+'"></td>\n                                    <td>'+n[t]+"</td>\n                                    <td>"+r+"</td>\n                                    <td>\n                                        "+o[t]+'\n                                        <a class="btn btn-primary">Details</a>\n                                    </td>\n        \n                                </tr>\n                            '),t++})}$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".groups .search .button").click()}else $(".nogroups").remove(),$(".groups table").css("display","none").after('<div class="alert alert-danger text-center font-weight-bold nogroups">There\'s not any group</div>'),$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".groups .search .button").click()})})}),$(function(){$(".home-page-header").parent("bhtmlody").css("height","100vh"),$(".home-page-header").parent("body").css("height","100vh"),$(".scroll").click(function(){$(".scroll").fadeOut(),$(".home-page-header").addClass("collapsed"),$(".home-page-header .nav-title h1").fadeIn(3e3),$(".home-page-header .nav-buttons .btn-group").fadeIn(3e3),$(".home-page-body").fadeIn(3e3,function(){$("html").getNiceScroll().resize(),animations()})}),$(".mycomment .rate .star").click(function(){var e=$(this).data("num");console.log(e),$("#rate").val(e),$(".star").each(function(){$(this).data("num")<=e?$(this).find("svg").addClass("active"):$(this).find("svg").removeClass("active")})})}),$(function(){$("body").has(".myfriends").length>0?(lastlogin(),setInterval(function(){lastlogin()},3e5)):$("body").find(".friends").length>0&&(lastlogin(),setInterval(function(){lastlogin()},3e5))}),$(function(){var e=$(".login-form");$(e).submit(function(e){e.preventDefault();var s=$("#username").val(),t=$("#password").val();$.post("api/login.php",{username:s,password:t},function(e){"error"!=e&&location.assign("communicate.php")})})}),$(function(){$(".notifies").on("click",".notify",function(){$.get("api/deletenotify.php?notify_id="+$(this).find(".id").text())}),setInterval(function(){make_notification()},5e3),setTimeout(function(){make_notification()},600),$(".notification .notify-btn").click(function(){$.get("api/seenotifies.php"),$(this).removeClass("new-notifies")})}),$(function(){var e=$(".signup-form");$(e).submit(function(e){$("#email").val(""==$("#email").val()?"null":$("#email").val())})}),$(function(){$("#user_img").change(function(){$(this).parent().siblings("img").attr("src",URL.createObjectURL(event.target.files[0]))}),$(".update_user_image").change(function(){$(this).parents("form")[0].submit()})}),$(function(){$(".users .form-search").submit(function(e){e.preventDefault();var s=""==$(".users #id").val()?"nono":$(".users #id").val(),t=""==$(".users #name").val()?"nono":$(".users #name").val(),a=null==$(".users [name=usertype]:checked").data("value")?"nono":$(".users [name=usertype]:checked").data("value");$.post("api/getusers.php",{id:s,name:t,type:a},function(e){if(""!=e){var s=e.split(";");for(user in s.pop(),$(".nousers").remove(),$(window).width()>768?$(".users table").css("display","table").find("tbody").html(""):$(".users table").css("display","block").find("tbody").html(""),s){var t=s[user].split(","),a="";t[0]!=$(".my-id").text()&&("no"==t[6]||"sender"==t[6]&&"unfriend_1"==t[6]||"taker"==t[6]&&"unfriend_2"==t[6]?a='<a class="btn btn-success mr-2 mb-1 mb-md-0" href="api/addfriend.php?friend='+t[0]+'">Add friend</a>':"friends"==t[6]?a='<a class="btn btn-danger mr-2 mb-1 mb-md-0" href="api/changefriendstatus.php?friend='+t[0]+'&status=unfriend">Remove friend</a>':"sender"==t[6]?a='<a class="btn btn-warning mr-2 mb-1 mb-md-0" href="api/removefriend.php?friend='+t[0]+'">Cancel the request</a>':"taker"==t[6]?a='<a class="btn btn-info mr-2 mb-1 mb-md-0" href="api/changefriendstatus.php?friend='+t[0]+'&status=friends">Accept the request</a>':(t[0]==$(".my-id").text()&&"unfriend_2"==t[6]||t[0]!=$(".my-id").text()&&"unfriend_1"==t[6])&&(a='<a class="btn btn-danger mr-2 mb-1 mb-md-0" href="api/removefriend.php?friend='+t[0]+'">Your friend unfriend you</a>')),$(".users table tbody").html($(".users table tbody").html()+"\n                        <tr "+(t[0]==$(".my-id").text()?'class="active"':"")+"> \n                            <td>"+t[0]+"</td>\n                            <td>"+t[1]+"</td>\n                            <td>"+t[2]+'</td>\n                            <td><img class="user-img" src="data/users_img/'+t[3]+'"></td>\n                            <td>\n                                '+a+'\n                                <a class="btn btn-primary">Details</a>\n                            </td>\n\n                        </tr>\n                    '),console.log(t[6])}$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".users .search .button").click()}else $(".nousers").remove(),$(".users table").css("display","none").after('<div class="alert alert-danger text-center font-weight-bold nousers">There\'s not any user</div>'),$("html").getNiceScroll().resize(),$("html").scrollTop(0),$(".users .search .button").click()})})});